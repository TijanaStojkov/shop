(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{103:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),l=a.n(o),c=(a(54),a(55),a(56),a(57),a(20)),i=a(4),s=a(3),u=(a(103),function(){return r.a.createElement(s.Navbar,{className:"red lighten-3",alignLinks:"left",brand:r.a.createElement("a",{className:"brand-logo right ",href:"google.com"},"Logo"),menuIcon:r.a.createElement(s.Icon,null,"menu"),options:{draggable:!0,edge:"left",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},r.a.createElement(c.b,{to:"/",exact:!0},"Shop"),r.a.createElement(c.b,{to:"/Orders"},"Orders"))}),d=a(17),p=a(7),m=a(8),h=a(10),f=a(9),v=a(11),g=a(18),E=a.n(g),b=a(24),y=a.n(b),C=a(25),O=a.n(C),k=a(26),j=a.n(k),P=(a(123),function(){return r.a.createElement("div",{className:"loader"},"Loading...")}),S=function(e){return r.a.createElement(s.Button,{node:"button",small:!0,style:{marginRight:"5px"},waves:"light",className:e.ClassName,onClick:e.clicked,disabled:e.disabled}," ",r.a.createElement(s.Icon,null,e.textOrIcon),e.text," ")},x=function(e){return Number(e.toFixed(2))+"$"},L=function(e){var t=e.productSizes.map((function(t,a){return a+1===e.productSizes.length?t:t+", "})),a=e.order?null:[r.a.createElement("span",{key:"1"},r.a.createElement(S,{ClassName:"teal lighten-3",clicked:function(){return e.addProduct(e.productName)},textOrIcon:"add"})),r.a.createElement("span",{key:"2"},r.a.createElement(S,{ClassName:"red lighten-3",clicked:function(){return e.removeProduct(e.productName)},textOrIcon:"remove"}))];return r.a.createElement(s.Col,{m:12,l:6},r.a.createElement(s.Card,{className:"Card",actions:a,closeIcon:r.a.createElement(s.Icon,null,"close"),revealIcon:r.a.createElement(s.Icon,null,"more_vert"),header:r.a.createElement(s.CardTitle,{image:e.productImages}),horizontal:!0},r.a.createElement("h3",null,e.productName),r.a.createElement("h3",null,e.order),r.a.createElement("p",null,"Quantity: ",e.productQuantity),r.a.createElement("p",null,"Price: ",x(e.productPrices)),r.a.createElement("p",null,"Sizes: ",t)))},I=function(e){var t=Object.keys(e.products).map((function(t){if("price"!==t)return e.order?e.products[t]>0?r.a.createElement(L,{order:e.order,key:t,productName:t,productQuantity:e.products[t],productImages:e.productImages[t],productPrices:e.productPrices[t],productSizes:e.productSizes[t]}):null:r.a.createElement(L,{key:t,productName:t,productQuantity:e.products[t],productImages:e.productImages[t],productPrices:e.productPrices[t],productSizes:e.productSizes[t],removeProduct:e.removeProduct,addProduct:e.addProduct})}));return r.a.createElement(s.Row,null,t)},z=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.orderable!==e.orderable||this.props.children!==e.children}},{key:"componentDidUpdate",value:function(){console.log("updated")}},{key:"render",value:function(){return r.a.createElement(s.Modal,{actions:[r.a.createElement("span",{key:"1"},r.a.createElement(s.Button,{flat:!0,modal:"close",node:"button",waves:"green"},"Close")),r.a.createElement("span",{key:"2"},r.a.createElement(s.Button,{flat:!0,modal:"close",node:"button",waves:"green",onClick:this.props.orderHandler},"Order"))],bottomSheet:!1,fixedFooter:!1,header:"Order summary",id:"modal-0",options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:r.a.createElement(s.Button,{node:"button",disabled:!this.props.orderable,onClick:this.props.updateModalComponentHandler},"Order summary")},r.a.createElement("div",null,this.props.children))}}]),t}(n.Component),w=function(e){return e.children},N=function(e,t){return function(a){function n(e){var a;return Object(p.a)(this,n),(a=Object(h.a)(this,Object(f.a)(n).call(this,e))).hideModal=function(){a.setState({error:null})},a.state={error:null},a.reqInterceptor=t.interceptors.request.use((function(e){return a.setState({error:null}),e})),a.resInterceptor=t.interceptors.response.use((function(e){return e}),(function(e){a.setState({error:e.message})})),a}return Object(v.a)(n,a),Object(m.a)(n,[{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptor),t.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return r.a.createElement(w,null,r.a.createElement("p",null,this.state.error),r.a.createElement(e,this.props))}}]),n}(n.Component)},X=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.products?Object.keys(this.props.products).map((function(t){return r.a.createElement("li",{key:t},r.a.createElement("span",{style:{textTransform:"capitalize"}},t),": ",e.props.products[t])})):"";return r.a.createElement(w,null,r.a.createElement("ul",null,t),r.a.createElement("p",null,"Total price: ",x(this.props.totalPrice)))}}]),t}(n.Component),M=(a(124),function(e){return r.a.createElement(w,null,r.a.createElement(s.Row,null,r.a.createElement(s.Col,{s:6},r.a.createElement(s.Select,{label:"Filter by size",id:"Select-9",multiple:!1,onChange:e.filterSize,options:{classes:"",dropdownOptions:{alignment:"left",autoTrigger:!0,closeOnClick:!0,constrainWidth:!0,coverTrigger:!0,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250}},value:""},r.a.createElement("option",{disabled:!0,value:""}," ",e.size," "),r.a.createElement("option",{value:"s"}," S "),r.a.createElement("option",{value:"m"}," M "),r.a.createElement("option",{value:"x"}," X "),r.a.createElement("option",{value:"xl"}," XL "),r.a.createElement("option",{value:"xxl"}," XXL "))),r.a.createElement(s.Col,{s:6})))}),T={shert:y.a,pants:O.a,skirt:j.a},D={shert:10,pants:4.3,skirt:5.4},F={shert:["X","L","XL","XXL"],pants:["X","M","XL"],skirt:["S","X","XXL"]},q=N(function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={products:null,filterProductsList:null,totalPrice:0,orderable:!1,errorMessage:"",size:"",order:!0},a.removeProduct=function(e){var t=a.state.products[e];if(0!==t){var n=t-1,r=Object(d.a)({},a.state.products);r[e]=n;var o=a.state.totalPrice-D[e];a.setState({products:r,filterProductsList:r,totalPrice:o},(function(){this.listProducts()})),a.updatePurchasable(r)}},a.addProduct=function(e){var t=a.state.products[e]+1,n=Object(d.a)({},a.state.products);n[e]=t;var r=a.state.totalPrice+D[e];a.setState({products:n,filterProductsList:n,totalPrice:r},(function(){this.listProducts()})),a.updatePurchasable(n)},a.updatePurchasable=function(e){var t=Object.keys(e).map((function(t){return e[t]})).reduce((function(e,t){return e+t}),0);a.setState({orderable:t>0})},a.orderHandler=function(){var e=[];for(var t in a.state.products)e.push(t+"="+a.state.products[t]);e.push("price="+a.state.totalPrice);var n=e.join("&");a.props.history.push({pathname:"/checkout",search:"?"+n})},a.filterSize=function(e){a.setState({size:e.target.value},(function(){this.listProducts()}))},a.listProducts=function(){if(""!==a.state.size){var e=a.state.size,t=Object(d.a)({},a.state.products);Object.keys(F).forEach((function(a){F[a].indexOf(e.toUpperCase())<0&&delete t[a]})),a.setState({filterProductsList:t})}},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://e-commerce-5e72e.firebaseio.com/products.json").then((function(t){e.setState({products:t.data,filterProductsList:t.data})})).catch((function(t){e.setState({errorMessage:"Network error get"})}))}},{key:"render",value:function(){var e=this.state.products?r.a.createElement(I,{products:this.state.filterProductsList,filterProductsList:this.state.filterProductsList,productImages:T,productPrices:D,productSizes:F,removeProduct:this.removeProduct,addProduct:this.addProduct}):r.a.createElement(P,null),t=null,a=null;return this.state.products&&(t=r.a.createElement(X,{products:this.state.products,totalPrice:this.state.totalPrice}),a=r.a.createElement(M,{size:this.state.size,filterSize:this.filterSize})),r.a.createElement("div",null,r.a.createElement("h1",null,"Our shop"),a,e,r.a.createElement("p",null,this.state.errorMessage),r.a.createElement(z,{products:this.state.products,totalPrice:this.state.totalPrice,orderable:this.state.orderable,orderHandler:this.orderHandler},t))}}]),t}(n.Component),E.a),V=function(e){return r.a.createElement(w,null,r.a.createElement(I,{order:e.order,products:e.filterProductsList,filterProductsList:e.filterProductsList,productImages:e.productImages,productPrices:e.productPrices,productSizes:e.productSizes}),r.a.createElement(S,{ClassName:"red lighten-3",clicked:e.onCheckoutCancle,text:"Cancle",textOrIcon:""}),r.a.createElement(S,{ClassName:"green lighten-3",clicked:e.onCheckoutContinue,text:"Continue",textOrIcon:""}))},H=(a(125),a(126),function(e){var t=null,a=[];switch(e.invalid&&e.shouldValidate&&e.tuched&&a.push("Invalid"),e.elementType){case"input":t=r.a.createElement("input",Object.assign({className:a},e.elementConfig,{value:e.value,onChange:e.change}));break;case"textarea":t=r.a.createElement("textarea",Object.assign({className:a},e.elementConfig,{value:e.value,onChange:e.change}));break;case"select":t=r.a.createElement("select",{value:e.value,onChange:e.change},e.elementConfig.options.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.deliveryValue)})));break;default:t=r.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value,onChange:e.change}))}return r.a.createElement("div",null,t)}),B=a(48),R=a.n(B),U=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your name"},value:"",validation:{required:!0},valid:!1,tuched:!1},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Your street"},value:"",validation:{required:!0},valid:!1,tuched:!1},zipCode:{elementType:"input",elementConfig:{type:"text",placeholder:"Your zipCode"},value:"",validation:{required:!0,minLength:5,maxLength:5},valid:!1,tuched:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Your country"},value:"",validation:{required:!0},valid:!1,tuched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:"Your email"},value:"",validation:{required:!0},valid:!1,tuched:!1},deliveryMethod:{elementType:"select",elementConfig:{options:[{value:"fastest",deliveryValue:"Fastest"},{value:"cheapest",deliveryValue:"Cheapest"}]},validation:{},value:"fastest",valid:!0}},formIsValid:!1,loading:!1},a.orderHandler=function(e){console.log("sfds"),e.preventDefault(),a.setState({loading:!0});var t={};for(var n in a.state.orderForm)t[n]=a.state.orderForm[n].value;var r={products:a.props.products,price:a.props.totalPrice,orderData:t,deliveryMethod:"fast"};E.a.post("https://e-commerce-5e72e.firebaseio.com/order.json",r).then((function(e){a.setState({loading:!1}),a.props.history.push("/")})).catch((function(e){a.setState({loading:!1,errorMessage:"Network error post"})}))},a.inputChangedHandler=function(e,t){var n=Object(d.a)({},a.state.orderForm),r=Object(d.a)({},n[t]);r.value=e.target.value,r.valid=a.checkValidity(r.value,r.validation),r.tuched=!0,n[t]=r,console.log(n);var o=!0;for(var l in n)o=n[l].valid&&o,console.log(o);console.log(o),a.setState({orderForm:n,formIsValid:o})},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"checkValidity",value:function(e,t){console.log(e,t);var a=!0;return t.required&&(a=""!==e.trim()&&a),t.minLength&&(a=e.length>=t.minLength&&a),t.maxLength&&(a=e.length<=t.maxLength&&a),a}},{key:"componentDidMount",value:function(){R()(document).ready((function(){window.$("select").formSelect()}))}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.orderForm)t.push({id:a,config:this.state.orderForm[a]});var n=r.a.createElement("form",{onSubmit:this.orderHandler,className:"text-placeholder"},t.map((function(t){return r.a.createElement(H,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,change:function(a){return e.inputChangedHandler(a,t.id)},invalid:!t.config.valid,shouldValidate:t.config.validation,tuched:t.config.tuched})})),r.a.createElement(S,{ClassName:"green lighten-2",text:"Order",textOrIcon:"",disabled:!this.state.formIsValid}));return this.state.loading&&(n=r.a.createElement(P,null)),r.a.createElement("div",null,r.a.createElement(s.Row,null,r.a.createElement(s.Col,{s:3}),r.a.createElement(s.Col,{s:6},r.a.createElement("h4",{className:"center "},"Enter your contact data"),n),r.a.createElement(s.Col,{s:3})))}}]),t}(n.Component),Y={shert:y.a,pants:O.a,skirt:j.a},A={shert:10,pants:4.3,skirt:5.4},Q={shert:["X","L","XL","XXL"],pants:["X","M","XL"],skirt:["S","X","XXL"]},W=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={products:{pants:0,shert:1,skirt:4},totalPrice:0,orderable:!1,errorMessage:"",size:"",order:!0},a.onCheckoutCancle=function(){a.props.history.goBack()},a.onCheckoutContinue=function(){a.props.history.replace("/checkout/contact-data")},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search);console.log(e);var t={},a=0,n=!0,r=!1,o=void 0;try{for(var l,c=e.entries()[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var i=l.value;"price"===i[0]?a=i[1]:t[i[0]]=+i[1]}}catch(s){r=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}this.setState({products:t,totalPrice:a})}},{key:"render",value:function(){var e=this;return r.a.createElement(w,null,r.a.createElement(V,{order:this.state.order,filterProductsList:this.state.products,productImages:Y,productPrices:A,productSizes:Q,onCheckoutCancle:this.onCheckoutCancle,onCheckoutContinue:this.onCheckoutContinue}),r.a.createElement(i.a,{path:this.props.match.path+"/contact-data",render:function(t){return r.a.createElement(U,Object.assign({products:e.state.products,totalPrice:e.state.totalPrice},t))}}))}}]),t}(n.Component),$=function(e){var t=[];for(var a in e.products)t.push({name:a,amounth:e.products[a]});var n=t.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("span",{style:{textTransform:"capitalize"}},e.name),": ",e.amounth)}));return r.a.createElement(s.CollapsibleItem,{expanded:!1,header:e.name,node:"div",onSelect:function(){}},r.a.createElement("ul",null,n,r.a.createElement("li",null,r.a.createElement("b",null,"Total price: ",x(4.3))),r.a.createElement("li",null)))},J=N(function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[],loading:!0},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://e-commerce-5e72e.firebaseio.com/order.json").then((function(t){var a=[];for(var n in t.data)console.log(t.data[n],n,t.data),a.push(Object(d.a)({},t.data[n],{id:n}));console.log(a),e.setState({orders:a,loading:!1})})).catch((function(t){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.state.orders?r.a.createElement(s.Collapsible,{accordion:!0,popout:!0},this.state.orders.map((function(e){return r.a.createElement($,{key:e.id,name:e.customer.name,deliveryMethod:e.deliveryMethod,products:e.products})}))):null;return this.state.loading&&(e=r.a.createElement(P,null)),r.a.createElement(w,null,r.a.createElement("h3",null,"Orders"),e)}}]),t}(n.Component),E.a),_=function(){return r.a.createElement("div",null,r.a.createElement(u,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:q}),r.a.createElement(i.a,{path:"/checkout",component:W}),r.a.createElement(i.a,{path:"/orders",component:J})))};var G=function(){return r.a.createElement(c.a,{basename:"/shop"},r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,a){e.exports=a.p+"static/media/shert.eda47ffe.jpg"},25:function(e,t,a){e.exports=a.p+"static/media/pants.99ddaf19.jpg"},26:function(e,t,a){e.exports=a.p+"static/media/skirt.64895794.jpg"},49:function(e,t,a){e.exports=a(127)},54:function(e,t,a){},55:function(e,t,a){}},[[49,1,2]]]);
//# sourceMappingURL=main.60852e1c.chunk.js.map